{"version":3,"sources":["components/Banner.js","App.js","request.js","index.js"],"names":["Banner","type","message","indexOf","console","error","className","App","useState","banner","setBannerInfo","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchingName","setSearchingName","nameInputerRef","useRef","useEffect","axios","get","then","res","data","updateBanner","msg","time","setTimeout","setInputDefualtStat","current","focus","handleDeletePerson","person","id","name","window","confirm","url","delete","deletePersonById","catch","e","finally","filter","p","showPersons","toLowerCase","style","display","value","onChange","target","onSubmit","preventDefault","info","number","existPerson","find","put","editPersonPhoneNumber","map","response","post","AddPerson","ref","key","onClick","ReactDOM","render","document","getElementById"],"mappings":"kOAGMA,G,MAAS,SAAC,GAGT,IAAD,IAFJC,YAEI,MAFC,SAED,EADJC,EACI,EADJA,QAEA,OAAKA,EACD,CAAC,SAAU,SAASC,QAAQF,GAAQ,GACtCG,QAAQC,MAAM,uBACP,MAGP,yBAAKC,UAAS,iBAAYL,IAASC,GANhB,O,gBCsHRK,EA1HH,WAAO,IAAD,EACkBC,mBAAS,IAD3B,mBACRC,EADQ,KACAC,EADA,OAEgBF,mBAAS,IAFzB,mBAERG,EAFQ,KAECC,EAFD,OAGgBJ,mBAAS,IAHzB,mBAGRK,EAHQ,KAGCC,EAHD,OAIoBN,mBAAS,IAJ7B,mBAIRO,EAJQ,KAIGC,EAJH,OAK4BR,mBAAS,IALrC,mBAKRS,EALQ,KAKOC,EALP,KAMVC,EAAiBC,mBAEvBC,qBAAU,WCFHC,IAAMC,IAFM,gBDMhBC,MAAK,SAAAC,GACJ,IAAMd,EAAUc,EAAIC,KACpBd,EAAWD,QAEZ,IAEH,IAAMgB,EAAe,SAACC,GAAmC,IAA9B3B,EAA6B,uDAAxB,SAAU4B,EAAc,uDAAT,KAC7CnB,EAAc,CAACT,OAAMC,QAAS0B,IAC9BE,YAAW,WACTpB,EAAc,MACbmB,IAECE,EAAsB,WAC1BjB,EAAW,IACXE,EAAa,IACbG,EAAea,QAAQC,SAWnBC,EAAqB,SAACC,GAAY,IAC9BC,EAAaD,EAAbC,GAAIC,EAASF,EAATE,KACRC,OAAOC,QAAP,iBAAyBF,EAAzB,2BCvBwB,SAACD,GAC/B,IAAMI,EAfiB,GAeJ,uBAAmBJ,GAEtC,OAAOd,IAAMmB,OAAOD,GDqBhBE,CAAiBN,GAAIZ,MAAK,WACxBG,EAAa,UAAD,OAAWU,EAAX,iBACXM,OAAM,SAAAC,GACPjB,EAAa,GAAD,OAAIU,EAAJ,6BAAqC,QAAS,QACzDQ,SAAQ,WACTjC,EAAWD,EAAQmC,QAAO,SAAAC,GAAC,OAAIA,EAAEX,KAAOA,UAyCxCY,EAAcrC,EAAQmC,QAAO,YACjC,OAD6C,EAAVT,KACvBY,cAAc9C,QAAQc,IAAkB,KAEtD,OACE,6BACE,yCACA,yBAAKiC,MAAO,CAACC,QAAS,aACpB,kBAAC,EAAD,CACElD,KAAMQ,EAAOR,KACbC,QAASO,EAAOP,WAGpB,6BACE,8CAEE,2BAAOkD,MAAOnC,EAAeoC,SAnEP,SAACT,GAC7B1B,EAAiB0B,EAAEU,OAAOF,YAqExB,0BAAMG,SAvDe,SAACX,GAExB,GADAA,EAAEY,iBACc,KAAZ3C,EAAJ,CACA,IAAM4C,EAAO,CAACpB,KAAMxB,EAAS6C,OAAQ3C,GACjC4C,EAAchD,EAAQiD,MAAK,SAACb,GAAD,OAAOA,EAAEV,OAASxB,KACjD,GAAI8C,EACErB,OAAOC,QAAP,UAAkB1B,EAAlB,oECjC2B,SAACuB,EAAIqB,GACxC,IAAMjB,EArBiB,GAqBJ,uBAAmBJ,GAEtC,OAAOd,IAAMuC,IAAIrB,EAAKiB,GDgChBK,CADaH,EAANvB,GACmBqB,GAAMjC,MAAK,SAAAC,GACnCE,EAAa,UAAD,OAAWd,EAAX,mBACZD,EAAWD,EAAQoD,KAAI,SAAAhB,GACrB,OAAIA,EAAEV,OAASxB,EACN,2BAAIkC,GAAX,IAAcW,OAAQ3C,IAEfgC,MAGXhB,OACCY,OAAM,SAAAC,GACPjB,EAAaiB,EAAEoB,SAAStC,KAAM,iBCxCf,SAAC,GAAoB,IAAnBW,EAAkB,EAAlBA,KAAMqB,EAAY,EAAZA,OAG/B,OAAOpC,IAAM2C,KAFM,eAEI,CAAC5B,OAAMqB,YD2C5BQ,CAAUT,GAAMjC,MAAK,WACnBG,EAAa,OAAD,OAAQd,EAAR,cACZkB,IACAnB,EAAW,GAAD,mBACLD,GADK,CAER8C,QAEDd,OAAM,SAAAC,GACPjB,EAAaiB,EAAEoB,SAAStC,KAAM,eAuB5B,yCACA,sCACQ,2BAAOyC,IAAKhD,EAAgBiC,MAAOvC,EAASwC,SA/EjC,SAACT,GACxB9B,EAAW8B,EAAEU,OAAOF,UA6EhB,WAEU,2BAAOA,MAAOrC,EAAWsC,SA7Ed,SAACT,GAC1B5B,EAAa4B,EAAEU,OAAOF,WA8ElB,6BACE,4BAAQnD,KAAK,UAAb,SAGJ,uCACC+C,EAAYe,KAAI,SAAChB,GAAO,IACfV,EAAiBU,EAAjBV,KAAMqB,EAAWX,EAAXW,OACd,OAAQ,uBAAGU,IAAK/B,GAAOA,EAAf,IAAsBqB,EAAtB,IAA8B,4BAAQW,QAAS,kBAAMnC,EAAmBa,KAA1C,gBEnH9CuB,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,W","file":"static/js/main.04151494.chunk.js","sourcesContent":["import React from 'react'\nimport './Banner.css'\n\nconst Banner = ({\n  type='normal',\n  message\n}) => {\n  if (!message) return null\n  if (['normal', 'error'].indexOf(type) < 0) {\n    console.error('banner wrong props.')\n    return null\n  }\n  return (\n    <div className={`banner ${type}`}>{message}</div>\n  )\n}\n\nexport { Banner }","import React, { useState, useEffect, useRef } from 'react';\nimport { Banner } from './components/Banner'\nimport { fetchAll, AddPerson, deletePersonById, editPersonPhoneNumber } from './request'\nconst App = () => {\n  const [ banner, setBannerInfo ] = useState({})\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchingName, setSearchingName ] = useState('')\n  const nameInputerRef = useRef()\n\n  useEffect(() => {\n    fetchAll()\n    .then(res => {\n      const persons = res.data\n      setPersons(persons)\n    })\n  }, [])\n\n  const updateBanner = (msg, type='normal', time=1800) => {\n    setBannerInfo({type, message: msg})\n    setTimeout(() => {\n      setBannerInfo({})\n    }, time);\n  }\n  const setInputDefualtStat = () => {\n    setNewName('')\n    setNewNumber('')\n    nameInputerRef.current.focus()\n  }\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n  const handleSearchingChange = (e) => {\n    setSearchingName(e.target.value)\n  }\n  const handleDeletePerson = (person) => {\n    const { id, name } = person\n    if (window.confirm(`delete ${name} from your phonebook?`)) {\n      deletePersonById(id).then(() => {\n        updateBanner(`delete ${name} success!`)\n      }).catch(e => {\n        updateBanner(`${name} perhaps already removed.`, 'error', 3000)\n      }).finally(() => {\n        setPersons(persons.filter(p => p.id !== id))\n      })\n    }\n  }\n  const handleFromSubmit = (e) => {\n    e.preventDefault()\n    if (newName === '') return\n    const info = {name: newName, number: newNumber}\n    let existPerson = persons.find((p) => p.name === newName)\n    if (existPerson) {\n      if (window.confirm(`${newName} is already added to phonebook. Do you want to replace number?`)) {\n        const {id} = existPerson\n        editPersonPhoneNumber(id, info).then(res => {\n          updateBanner(`update ${newName} info success!`)\n          setPersons(persons.map(p => {\n            if (p.name === newName) {\n              return {...p, number: newNumber}\n            } else {\n              return p\n            }\n          }))\n          setInputDefualtStat()\n        }).catch(e => {\n          updateBanner(e.response.data, 'error')\n        })\n      }\n      return\n    }\n    \n    AddPerson(info).then(() => {\n      updateBanner(`add ${newName} success!`)\n      setInputDefualtStat()\n      setPersons([\n        ...persons,\n        info\n      ])\n    }).catch(e => {\n      updateBanner(e.response.data, 'error')\n    })\n  }\n\n  const showPersons = persons.filter(({name}) => {\n    return name.toLowerCase().indexOf(searchingName) > -1\n  })\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <div style={{display: 'absolute'}}>\n        <Banner \n          type={banner.type} \n          message={banner.message} \n        />\n      </div>\n      <div>\n        <p>\n          Filter show with\n          <input value={searchingName} onChange={handleSearchingChange}/>\n        </p>\n      </div>\n      <form onSubmit={handleFromSubmit}>\n        <h3>Add a new</h3>\n        <div>\n          name: <input ref={nameInputerRef} value={newName} onChange={handleNameChange}/>\n          number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      {showPersons.map((p) => {\n        const { name, number } = p\n        return (<p key={name}>{name} {number} <button onClick={() => handleDeletePerson(p)}>delete</button></p>)\n      })}\n    </div>\n  )\n}\n\nexport default App\n","import axios from 'axios'\n\nconst isProd = process.env.NODE_ENV === 'production'\n\nconst baseUrl = isProd ? '' : 'http://localhost:3001'\n\nexport const fetchAll = () => {\n  const url = baseUrl + `/api/persons`\n\n  return axios.get(url)\n}\n\nexport const fetchPersonById = (id) => {\n  const url = baseUrl + `/api/persons/${id}`\n\n  return axios.get(url)\n}\n\nexport const deletePersonById = (id) => {\n  const url = baseUrl + `/api/persons/${id}`\n\n  return axios.delete(url)\n}\n\nexport const editPersonPhoneNumber = (id, info) => {\n  const url = baseUrl + `/api/persons/${id}`\n\n  return axios.put(url, info)\n}\n\nexport const AddPerson = ({name, number}) => {\n  const url = baseUrl + `/api/persons`\n\n  return axios.post(url, {name, number})\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}