(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),o=t.n(c),u=t(17),i=t(6),l=t(3),s=(t(23),function(e){var n=e.type,t=void 0===n?"normal":n,a=e.message;return a?["normal","error"].indexOf(t)<0?(console.error("banner wrong props."),null):r.a.createElement("div",{className:"banner ".concat(t)},a):null}),m=t(2),f=t.n(m),p=function(){var e=Object(a.useState)({}),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([]),m=Object(l.a)(o,2),p=m[0],d=m[1],b=Object(a.useState)(""),v=Object(l.a)(b,2),h=v[0],E=v[1],O=Object(a.useState)(""),g=Object(l.a)(O,2),j=g[0],y=g[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),S=k[0],C=k[1],x=Object(a.useRef)();Object(a.useEffect)((function(){f.a.get("/api/persons").then((function(e){var n=e.data;d(n)}))}),[]);var D=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1800;c({type:n,message:e}),setTimeout((function(){c({})}),t)},J=function(){E(""),y(""),x.current.focus()},N=function(e){var n=e.id,t=e.name;window.confirm("delete ".concat(t," from your phonebook?"))&&function(e){var n=""+"/api/persons/".concat(e);return f.a.delete(n)}(n).then((function(){D("delete ".concat(t," success!"))})).catch((function(e){D("".concat(t," perhaps already removed."),"error",3e3)})).finally((function(){d(p.filter((function(e){return e.id!==n})))}))},A=p.filter((function(e){return e.name.toLowerCase().indexOf(S)>-1}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement("div",{style:{display:"absolute"}},r.a.createElement(s,{type:t.type,message:t.message})),r.a.createElement("div",null,r.a.createElement("p",null,"Filter show with",r.a.createElement("input",{value:S,onChange:function(e){C(e.target.value)}}))),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""!==h){var n={name:h,number:j},t=p.find((function(e){return e.name===h}));if(t)window.confirm("".concat(h," is already added to phonebook. Do you want to replace number?"))&&function(e,n){var t=""+"/api/persons/".concat(e);return f.a.put(t,n)}(t.id,n).then((function(e){D("update ".concat(h," info success!")),d(p.map((function(e){return e.name===h?Object(i.a)(Object(i.a)({},e),{},{number:j}):e}))),J()})).catch((function(e){D(e.response.data,"error")}));else(function(e){var n=e.name,t=e.number;return f.a.post("/api/persons",{name:n,number:t})})(n).then((function(){D("add ".concat(h," success!")),J(),d([].concat(Object(u.a)(p),[n]))})).catch((function(e){D(e.response.data,"error")}))}}},r.a.createElement("h3",null,"Add a new"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{ref:x,value:h,onChange:function(e){E(e.target.value)}}),"number: ",r.a.createElement("input",{value:j,onChange:function(e){y(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))),r.a.createElement("h2",null,"Numbers"),A.map((function(e){var n=e.name,t=e.number;return r.a.createElement("p",{key:n},n," ",t," ",r.a.createElement("button",{onClick:function(){return N(e)}},"delete"))})))};o.a.render(r.a.createElement(p,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.04151494.chunk.js.map